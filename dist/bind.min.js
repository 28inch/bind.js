var Bind=function e(t){"use strict";function n(e,t){for(var n=e.length,r=0;n>r;r++)t(e[r],r,e)}function r(e,t){var r="pop push reverse shift sort splice unshift".split(" ");n(r,function(n){this[n]=function(){this.__dirty=!0;var r=u[n].apply(this,arguments);return delete this.__dirty,e&&t.ready&&e(this),r}.bind(this)}.bind(this));var i=this.length;return Object.defineProperty(this,"length",{configurable:!1,enumerable:!0,set:function(e){if(this.__dirty)return void(i=e);var t=1*e;return i!==t&&(t>i?this.push.apply(this,new Array(t-i)):this.splice(t),i=t),e},get:function(){return i}}),this}function i(e,t,o,u){return u||(u=[]),o.ready&&t.__callback?e:(n(Object.getOwnPropertyNames(t),function(p){if("__callback"!==p){var d,y=t[p],v=[].slice.call(u),b=f,_=f;v.push(p);var k=o.mapping[v.join(".")];if(k&&"[object Object]"===k.toString()&&(k.callback&&(d=k.callback),k.transform&&(b=h(k.transform)),k.parse&&(_=h(k.parse)),k=k.dom),"function"==typeof k)d=k;else if("string"==typeof k){var m=c(k||"☺");0===m.length&&console.warn('No elements found against "'+k+'" selector');var g=["SELECT","INPUT","PROGRESS"],A=d;d=function(t){m=c(k||"☺"),m&&n(m,function(e){if(!e.__dirty)if(-1!==g.indexOf(e.nodeName))if("checkbox"===e.type){if(t instanceof Array){var r=t.filter(function(t){return t===e.value?(e.checked=e.value===b(t),!0):void 0});0===r.length&&(e.checked=!1)}}else"radio"===e.type?e.checked=e.value===b(t):e.value=b(t);else{t instanceof Array||(t=[t]);var i="";n(t,function(e){i+=b(e)}),e.innerHTML=i}}),A&&A.apply(e,arguments)},n(m,function(t){if("INPUT"===t.nodeName||"SELECT"===t.nodeName){var r=function(){this.__dirty=!0;var r;if("checkbox"===t.type){var i=(t.form||document).querySelectorAll('input[name="'+t.name+'"][type="'+t.type+'"]');if(e[p]instanceof Array){var a=[];n(i,function(e){e.checked&&a.push(b(e.value))}),r=a}else r=this.checked?_(this.value):null}else"radio"===t.type&&(r=this.checked?_(this.value):null),r=_("number"==typeof e[p]?1*this.value:this.value);void 0===r&&(r=this.value),e[p]=r,this.__dirty=!1},i={checkbox:"change",radio:"change"}[t.type];t.addEventListener(i||"input",r)}})}d&&v.reduce(function(e,t,n,r){return e[t]||(e[t]={}),n===r.length-1&&(e[t].__callback=d),e[t]},o.callbacks);var O=function(e){var t=[],n=[],r=o.instance,i=!1;v.reduce(function(c,o,u){if(c&&c[o]&&o){if(r=r[o],"function"==typeof c[o].__callback){var l=u===v.length-1?e:r;r.__dirty&&(i={callback:c[o].__callback,instance:l}),n.push(a(l instanceof Array?[]:{},l)),t.push(c[o].__callback)}return c[o]||{}}},o.callbacks),i?setTimeout(function(){var e=i.instance;i.callback.call(o.instance,a(e instanceof Array?[]:{},e))},0):(n.reverse(),t.reverse().forEach(function(e,t){e.call(o.instance,n[t])}))},j={configurable:!0,enumerable:!0,set:function(t){var n=y!==t?y:void 0;y=!o.ready||typeof t!==s||null===t||l(t)||t.__callback?l(t)?i(new r(O,o),t,o,v):t:i(e[p]||{},t,o,v),o.ready?O(y):o.deferred.push(O.bind(e,y,n))},get:function(){return y}};try{Object.defineProperty(e,p,j)}catch(P){}typeof y!==s||null===y||l(y)?l(y)?e[p]=i(new r(O,o),y,o,v):e instanceof r||(e[p]=y):e[p]=i(e[p]||{},y,o,v)}}),e instanceof r&&e.push.apply(e,t),e)}function a(t,r){return r instanceof Object?(n(Object.getOwnPropertyNames(r),function(n){var i=r[n];e.prototype[n]||"__callback"===n||(typeof i===s&&null!==i&&i instanceof Array?t[n]=[].map.call(i,function(e){return e instanceof Object?a(t[n]||{},e):e}):typeof i!==s||null===i||l(i)?t[n]=i:t[n]=a(t[n]||{},i))}),t):r}function e(r,a){if(!this||this===t)return new e(r,a);var c={mapping:a,callbacks:{},deferred:[],ready:!1,instance:this};return i(this,r,c),c.ready=!0,c.deferred.length&&n(c.deferred,function(e){e()}),this}if(!Function.bind||!Object.defineProperty)throw new Error("Prerequisite APIs not available.");var c;try{c=document.querySelectorAll.bind(document)}catch(o){}var u=[],l=Array.isArray,s="object",f=function(e){return e},h=function(e){return function(){try{return e.apply(this,arguments)}catch(t){console.error(t.stack?t.stack:t)}}};return r.prototype=[],e.prototype.__export=function(){return a({},this)},e}(this);"undefined"!=typeof exports&&(module.exports=Bind);