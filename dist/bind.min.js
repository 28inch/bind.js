var Bind=function e(t){"use strict";function r(e,t){for(var r=e.length,n=0;r>n;n++)t(e[n],n,e)}function n(e,t){var n="pop push reverse shift sort splice unshift".split(" ");r(n,function(r){this[r]=function(){var n=this.slice(0);this.__dirty=!0;var i=o[r].apply(this,arguments);return e&&t.ready&&e.call(this,this.slice(0),n),delete this.__dirty,i}.bind(this)}.bind(this));var i=this.length;return Object.defineProperty(this,"length",{configurable:!1,enumerable:!0,set:function(e){if(this.__dirty)return void(i=e);var t=1*e;return i!==t&&(t>i?this.push.apply(this,new Array(t-i)):this.splice(t),i=t),e},get:function(){return i}}),this}function i(e,t,c,o,f){return o||(o=[]),r(Object.getOwnPropertyNames(t),function(h){if("__callback"!==h){var d,p=t[h],y=[].slice.call(o),v=s,b=s;y.push(h);var _=c.mapping[y.join(".")];if(_&&"[object Object]"===_.toString()&&(_.callback&&(d=_.callback),_.transform&&(v=u(_.transform)),_.parse&&(b=u(_.parse)),_=_.dom),"function"==typeof _)d=_;else if("string"==typeof _){var m=a(_||"☺");0===m.length&&console.warn('No elements found against "'+_+'" selector');var g=["SELECT","INPUT","PROGRESS"],k=d;d=function(t){m=a(_||"☺"),m&&r(m,function(e){if(!e.__dirty)if(-1!==g.indexOf(e.nodeName))if("checkbox"===e.type){if(t instanceof Array){var n=t.filter(function(t){return t===e.value?(e.checked=e.value===v(t),!0):void 0});0===n.length&&(e.checked=!1)}}else"radio"===e.type?e.checked=e.value===v(t):e.value=v(t);else{t instanceof Array||(t=[t]);var i="";r(t,function(e){i+=v(e)}),e.innerHTML=i}}),k&&k.apply(e,arguments)},r(m,function(t){if("INPUT"===t.nodeName||"SELECT"===t.nodeName){var n=function(){this.__dirty=!0;var n;if("checkbox"===t.type){var i=(t.form||document).querySelectorAll('input[name="'+t.name+'"][type="'+t.type+'"]');if(e[h]instanceof Array){var a=[];r(i,function(e){e.checked&&a.push(v(e.value))}),n=a}else n=this.checked?b(this.value):null}else"radio"===t.type&&(n=this.checked?b(this.value):null),n=b("number"==typeof e[h]?1*this.value:this.value);void 0===n&&(n=this.value),e[h]=n,this.__dirty=!1},i={checkbox:"change",radio:"change"}[t.type];t.addEventListener(i||"input",n)}})}var A=d;d=function(){console.log("callback on %s",h),A&&A.apply(this,arguments),f&&f.__callback&&f.__callback()};var P={configurable:!0,enumerable:!0,set:function(t){var r,a=p!==t?p:void 0,o=f instanceof n;o&&(r=f.slice(0)),p=c.ready&&typeof t===l&&null!==t&&!Array.isArray(t)?i(e[h]||{},t,c,y,e[h]):Array.isArray(t)?i(new n(d,c),t,c,y,j):t;var s=d.bind(e,p,a);e[h]instanceof Object&&!e[h].__callback&&(e[h].__callback=s),c.ready&&d?s():d?c.deferred.push(s):c.ready&&f&&f.__callback&&f.__callback()},get:function(){return p}};try{Object.defineProperty(e,h,P)}catch(O){}if(typeof p!==l||null===p||Array.isArray(p))if(Array.isArray(p)){var j={};e[h]=i(new n(d,c),p,c,y,j),j.__callback=e[h].__callback}else e instanceof n||(e[h]=p);else e[h]=i(e[h]||{},p,c,y,e[h])}}),e instanceof n&&e.push.apply(e,t),e}function e(n,a){if(!this||this===t)return new e(n,a);var c={mapping:a,deferred:[],ready:!1};return i(this,n,c),c.ready=!0,c.deferred.length&&r(c.deferred,function(e){e.call(this)}.bind(this)),this}if(!Function.bind)throw new Error("Prerequisite APIs not available: Function.bind");if(!Object.defineProperty)throw new Error("Prerequisite APIs not available: Object.defineProperty");var a;try{a=document.querySelectorAll.bind(document)}catch(c){}var o=[],l="object",s=function(e){return e},u=function(e){return function(){try{return e.apply(this,arguments)}catch(t){console.error(t.stack?t.stack:t)}}};return n.prototype=[],e.prototype.__export=function(){function t(i,a){return r(Object.getOwnPropertyNames(a),function(r){var c=a[r];e.prototype[r]||(typeof c===l&&null!==c&&c instanceof n?i[r]=[].slice.call(c,0):typeof c!==l||null===c||Array.isArray(c)?i[r]=c:i[r]=t(i[r]||{},c))}),i}return t({},this)},e}(this);"undefined"!=typeof exports&&(module.exports=Bind);