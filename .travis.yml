language: node_js
node_js:
- '0.12'
sudo: false
cache:
  directories:
  - node_modules
notifications:
  email: false
before_script:
- npm install
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
after_script:
- cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./coverage
before_deploy:
- npm config set spin false --global
env:
  global: GH_TOKEN=QDwCGyLxL6jp3obNuJocfGTwmfJr4jP1qYFlmE/KbZyMHdrUZzwuz3TFSdb02DUOJIAkPpMM93R6gymhW94VdNtwlg5efihX/3M6w8XCjTPamtRsyMjTLV1DC2YKrK0ZrbLGr+F0DaBzb5g1WvDWdc+TEOmAlleMNMiURTAvDxQ=
deploy:
  provider: npm
  email: remy@remysharp.com
  skip_cleanup: true
  api_key:
    secure: SidhlEg+iItVCFr5KMmhnzHMFQW/ZQCh41pJp1J+OEFSracZ6JXlLfsgoMIA4SZZB7zp9ugw0BwcybRuJmWF1oSEOFH2AbXHwltVq3ft0BuX/NdNp8SdQ1dhnLe+QDe7hlTdKfWnS5pMLuP4Ko/23AfADdc669eHuZ/gU4l08PM=
  on:
    branch: master
    repo: remy/bind
